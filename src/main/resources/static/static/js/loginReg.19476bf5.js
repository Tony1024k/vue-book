(function(e){function t(t){for(var n,a,i=t[0],u=t[1],l=t[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={loginReg:0},s=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("7160")},"388e":function(e,t,r){},5003:function(e,t,r){"use strict";var n=r("388e"),o=r.n(n);o.a},"53ff":function(e,t,r){},"696d":function(e,t,r){"use strict";var n=r("765f"),o=r.n(n);o.a},"6a59":function(e,t,r){"use strict";var n=r("9f9e"),o=r.n(n);o.a},7160:function(e,t,r){"use strict";r.r(t);r("14c6"),r("08c1"),r("4842"),r("d9fc");var n=r("2b0e"),o=(r("be3b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"loginReg"}},[r("Header"),r("router-view")],1)}),s=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"title"},[r("el-link",{staticStyle:{"font-size":"20px",color:"#666"},attrs:{href:"/",underline:!1}},[e._v("网上图书商城")])],1)])},i=[],u={name:"Header"},l=u,c=(r("6a59"),r("2877")),p=Object(c["a"])(l,a,i,!1,null,"ae5469d8",null),d=p.exports,m={name:"loginReg",components:{Header:d}},f=m,g=(r("c777"),Object(c["a"])(f,o,s,!1,null,null,null)),b=g.exports,h=(r("7378"),r("8c4f")),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-container",attrs:{model:e.loginForm,rules:e.rules,"label-position":"left","label-width":"0px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick("loginForm")}}},[r("div",{staticStyle:{float:"right"}},[r("router-link",{attrs:{to:{path:"/reg"}}},[e._v("注册")])],1),r("h3",{staticClass:"login_title"},[e._v("系统登录")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号",autofocus:""},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",{staticStyle:{width:"100%","margin-top":"50px"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitClick("loginForm")}}},[e._v("登录")])],1)],1)},w=[],y={data:function(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{username:"admin",password:"Aa1234"},loading:!1}},methods:{submitClick:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.axiosReqest("/login",{username:t.loginForm.username,password:t.loginForm.password},"post").then((function(e){t.loading=!1,e&&200===e.status&&e.data.obj&&setTimeout((function(){window.open("/","_self")}),1e3)})).catch((function(){t.loading=!1}))}))}}},F=y,x=(r("5003"),Object(c["a"])(F,v,w,!1,null,null,null)),k=x.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"regForm",staticClass:"reg-container",attrs:{model:e.regForm,"status-icon":"",rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("regForm")}}},[r("div",{staticStyle:{float:"right"}},[r("router-link",{attrs:{to:{path:"/"}}},[e._v("返回登录")])],1),r("h3",{staticClass:"reg_title"},[e._v("用户注册")]),r("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":"96px"}},[r("el-input",{attrs:{autofocus:""},model:{value:e.regForm.username,callback:function(t){e.$set(e.regForm,"username",t)},expression:"regForm.username"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"phone","label-width":"96px"}},[r("el-input",{model:{value:e.regForm.phone,callback:function(t){e.$set(e.regForm,"phone",t)},expression:"regForm.phone"}},[r("el-button",{staticStyle:{"text-align":"center",margin:"0"},attrs:{slot:"append",type:"text",disabled:e.disabled},on:{click:function(t){return e.getCount()}},slot:"append"},[e._v(e._s(e.count)+"\n                ")])],1)],1),r("el-form-item",{attrs:{label:"密码",prop:"password","label-width":"96px"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2","label-width":"96px"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.regForm.password2,callback:function(t){e.$set(e.regForm,"password2",t)},expression:"regForm.password2"}})],1),r("el-form-item",{attrs:{label:"输入验证码",prop:"code","label-width":"96px"}},[r("el-input",{model:{value:e.regForm.code,callback:function(t){e.$set(e.regForm,"code",t)},expression:"regForm.code"}})],1),r("el-form-item",{staticStyle:{"margin-top":"40px","text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("regForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("regForm")}}},[e._v("重置")])],1)],1)],1)},$=[],O=(r("a481"),{data:function(){var e=this,t=function(t,r,n){""!==e.regForm.password2&&e.$refs.regForm.validateField("password2"),n()},r=function(t,r,n){r!==e.regForm.password?n(new Error("两次输入密码不一致!")):n()};return{regForm:{username:"",phone:"",password:"",password2:"",code:""},count:"获取验证码",loading:!1,disabled:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:["blur"]},{pattern:/^[a-zA-Z0-9_-]{4,16}$/,message:"用户名由4-16个字母数字下划线或减号组成",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur"]},{validator:t,trigger:["blur"]},{pattern:/^(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9~!@&%#_]{6,16}$/,message:"密码长度为 6 到 16 个字符且必须包含大小写",trigger:["blur"]}],password2:[{required:!0,message:"请再次输入密码",trigger:["blur"]},{validator:r,trigger:["blur"]}],phone:[{required:!0,message:"号码不能为空",trigger:"blur"},{pattern:/^(((\+\d{2}-)?0\d{2,3}-\d{7,8})|((\+\d{2}-)?(\d{2,3}-)?([1][3-9]\d{9})))$/,message:"请输入正确的电话号码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.postRequest("/reg",{username:t.regForm.username,password:t.regForm.password,verifyCode:t.regForm.code,phone:t.regForm.phone}).then((function(e){t.loading=!1,e&&200===e.status&&t.$router.replace({path:"/"})}))}))},resetForm:function(e){this.$refs[e].resetFields()},getCount:function(){var e=this;this.disabled=!0,this.count=40,setInterval((function(){e.count>0?e.count--:(e.count="获取验证码",e.disabled=!1)}),1200),this.axiosReqest("/verifyCode",{phone:this.regForm.phone},"post")}}}),j=O,q=(r("696d"),Object(c["a"])(j,_,$,!1,null,"1465ba55",null)),C=q.exports;n["default"].use(h["a"]);var P=new h["a"]({routes:[{path:"/",name:"login",component:k},{path:"/reg",name:"reg",component:C}]}),M=r("b775");n["default"].config.productionTip=!1,n["default"].prototype.axiosReqest=M["a"],n["default"].prototype.postRequest=M["b"],new n["default"]({router:P,render:function(e){return e(b)}}).$mount("#loginReg")},7378:function(e,t,r){"use strict";var n=r("2b0e"),o=r("5c96"),s=r.n(o);r("0fae");n["default"].use(s.a)},"765f":function(e,t,r){},"9f9e":function(e,t,r){},b775:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c}));var n=r("bc3a"),o=r.n(n),s=r("5c96"),a=r("4328"),i=r.n(a);o.a.interceptors.request.use((function(e){return e}),(function(e){s["Message"].error({message:"请求超时!"}),console.log(e),Promise.reject(e)})),o.a.interceptors.response.use((function(e){if(!e.status||200!==e.status||500!==e.data.status)return e.data.msg&&s["Message"].success({message:e.data.msg}),e;s["Message"].error({message:e.data.msg})}),(function(e){504===e.response.status||404===e.response.status?s["Message"].error({message:"404，请求的页面不存在"}):403===e.response.status?s["Message"].error({message:"权限不足,请联系管理员!"}):401===e.response.status?s["Message"].error({message:e.response.data.msg}):e.response.data.msg?s["Message"].error({message:e.response.data.msg}):s["Message"].error({message:"未知错误!"})}));var u="",l=function(e,t){return o()({method:"post",url:"".concat(u).concat(e),data:t,transformRequest:[function(e){return i.a.stringify(e,{allowDots:!0})}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},c=function(e,t,r){return o()({url:"".concat(u).concat(e),method:r,params:"get"===r||"delete"===r?t:"",data:"post"===r||"put"===r?t:"",headers:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8"},transformRequest:[function(e){return i.a.stringify(e,{allowDots:!0})}]})}},be3b:function(e,t,r){"use strict";var n=r("2b0e"),o=r("bc3a"),s=r.n(o),a={},i=s.a.create(a);i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=i,window.axios=i,Object.defineProperties(e.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},n["default"].use(Plugin);Plugin},c777:function(e,t,r){"use strict";var n=r("53ff"),o=r.n(n);o.a}});
//# sourceMappingURL=loginReg.19476bf5.js.map